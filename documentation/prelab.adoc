# Deployment of the prerequisites & the environment for the Demo

##

* Deploy Infra Networking Azure
```
ansible-playbook pre_deploy_azure_infra.yml  --vault-password-file .vault-password-file -e "lab_name=lab1"
```

* Deploy AAP VM Azure
```
ansible-playbook pre_deploy_tower_vm.yml  --vault-password-file .vault-password-file -e "lab_name=lab1"
```

* Deploy preconfiguration AAP
```
ansible-playbook pre_configure_tower.yml -i inventory/hosts  --vault-password-file .vault-password-file -e "lab_name=lab1" --tag="install"
```

* [From AAP] Deploy DevSecOps infra lab with the WT - Lab2_Workflow_deploy_azure_ciberinfra

  - deploy_win10_vm.yml
  - deploy_rhel_vm.yml
  - deploy_ckp_gw.yml
  - deploy_ckp_sms.yml

* [From RDP to Win10] Manual to allow the SSH from AAP

```
$url = "https://raw.githubusercontent.com/ansible/ansible/devel/examples/scripts/ConfigureRemotingForAnsible.ps1"
$file = "$env:temp\ConfigureRemotingForAnsible.ps1"
(New-Object -TypeName System.Net.WebClient).DownloadFile($url, $file)
powershell.exe -ExecutionPolicy ByPass -File $file
Set-ExecutionPolicy RemoteSigned
```

NOTE: Automate this!

* [From AAP] Deploy DevSecOps infra lab with the WT - Lab3_config_win10_vm

  - config_win10_vm.yml